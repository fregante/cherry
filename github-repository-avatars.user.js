// ==UserScript==
// @name         GitHub Repository Avatars
// @version      3
// @description  Add avatars to GitHub repositories
// @author       kidonng
// @namespace    https://github.com/kidonng/cherry
// @match        https://github.com/*
// ==/UserScript==
(()=>{var u=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"],i=new Set(u);i.delete("a");i.delete("audio");i.delete("canvas");i.delete("iframe");i.delete("script");i.delete("video");var p=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,h=e=>e===DocumentFragment,g=(e,r)=>{for(let[t,a]of Object.entries(r))t.startsWith("-")?e.style.setProperty(t,a):typeof a=="number"&&!p.test(t)?e.style[t]=`${a}px`:e.style[t]=a},y=e=>typeof e=="string"?i.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):h(e)?document.createDocumentFragment():e(e.defaultProps),f=(e,r,t)=>{t!=null&&(/^xlink[AHRST]/.test(r)?e.setAttributeNS("http://www.w3.org/1999/xlink",r.replace("xlink","xlink:").toLowerCase(),t):e.setAttribute(r,t))},m=(e,r)=>{for(let t of r)t instanceof Node?e.appendChild(t):Array.isArray(t)?m(e,t):typeof t!="boolean"&&typeof t<"u"&&t!==null&&e.appendChild(document.createTextNode(t))},v=(e,r,...t)=>{var a;let o=y(e);if(m(o,t),o instanceof DocumentFragment||!r)return o;for(let[n,s]of Object.entries(r))if(n==="htmlFor"&&(n="for"),n==="class"||n==="className"){let l=(a=o.getAttribute("class"))!==null&&a!==void 0?a:"";f(o,"class",(l+" "+String(s)).trim())}else if(n==="style")g(o,s);else if(n.startsWith("on")){let l=n.slice(2).toLowerCase().replace(/^-/,"");o.addEventListener(l,s)}else n==="dangerouslySetInnerHTML"&&"__html"in s?o.innerHTML=s.__html:n!=="key"&&s!==!1&&f(o,n,s===!0?"":s);return o},x=typeof DocumentFragment=="function"?DocumentFragment:()=>{},w={createElement:v,Fragment:x},c=w;var d=()=>{let e=document.querySelector("#repository-container-header .octicon-repo");if(!e)return;let r=document.querySelector("[rel=author]"),t=r.textContent,a=`@${t}`,o=document.querySelector(`[alt="${a}"]`)?.src||`https://avatars.githubusercontent.com/${t}?size=48`,n=c.createElement("img",{className:"avatar mr-2",src:o,width:"24",height:"24",alt:a});r.dataset.hovercardType==="user"&&n.classList.add("avatar-user"),e.replaceWith(n)};document.addEventListener("pjax:end",d);d();})();
