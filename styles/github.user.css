/* ==UserStyle==
@name         GitHub
@version      9
@description  Style optimizations for GitHub
@author       kidonng
@namespace    https://github.com/kidonng/cherry
@homepageURL  https://github.com/kidonng/cherry
@preprocessor stylus

@var checkbox hidePublicBadge "Hide \"Public\" badge after repository name" 0
@var checkbox lightHeader "Light theme header" 0
@var checkbox repositionOctotreeBookmark "Reposition Octotree bookmark icon" 0
@var checkbox hideProfileHighlights "Hide \"Achievements\" and \"Highlights\" on user profile" 1
@var checkbox alignPRAuthorName "Align author name on PR sticky header (for Chinese locale users)" 0
==/UserStyle== */
@-moz-document url-prefix("https://github.com/")
{
  if hidePublicBadge {
    /* https://github.com/sindresorhus/refined-github/issues/4767#issuecomment-915449216 */
    [itemprop='name'] + .Label,
    .public [itemprop^='name'] + .Label,
    .pinned-item-list-item-content .Label,
    .Popover .f5 + .Label {
      display: none;
    }

    .rgh-ci-link .Label + .commit-build-statuses {
      margin-left: 0;
    }
  }

  if alignPRAuthorName {
    /*
     * Fix a GitHub bug that PR author name is not aligned when using Chinese locale
     * https://github.com/sindresorhus/refined-github/pull/3660#discussion_r506837095
     */
    .sticky-content .author.css-truncate-target {
      vertical-align: -4px;
    }
  }

  /*
   * Hide "Packages" tab on user profile
   * https://github.com/sindresorhus/refined-github/pull/4487
   */
  .UnderlineNav-item[href$='?tab=packages']:not(.selected) {
    display: none;
  }

  if lightHeader {
    .Header,
    .header-search-wrapper {
      background: var(--color-bg-secondary);
    }

    .Header-link {
      color: black;
    }

    .Header-link:focus,
    .Header-link:hover {
      color: rgba(0, 0, 0, 0.7);
    }

    .header-search-input::placeholder {
      color: rgba(0, 0, 0, 0.7);
    }
  }

  /* Hide Pro badge */
  .js-hovercard-content [title='Label: Pro'] {
    display: none !important;
  }

  if hideProfileHighlights {
    .border-top.color-border-secondary.pt-3.mt-3.d-none.d-md-block {
      display: none !important;
    }
  }

  /*
   * Expand navigation link in repository file tree
   * https://github.com/sindresorhus/refined-github/issues/3281#issuecomment-649480805
   */
  [role='rowheader'] .js-navigation-open {
    display: inline-block;
    width: 100%;
  }

  /* Remove avatar border */
  .avatar {
     box-shadow: none;
  }

  /*
   * Hide following items below new comment box:
   * - "Remember, contributions to this repository should follow its contributing guidelines and code of conduct."
   * - "Show your support for <user> by sponsoring them."
   */
  #issuecomment-new .timeline-comment--caret ~ div {
    display: none !important;
  }

  if repositionOctotreeBookmark {
    /*
     * Put Octotree bookmark icon in front of title
     * https://github.com/ovity/octotree/issues/992
     */
    .gh-header-title {
      display: flex;
      align-items: baseline;
      flex-wrap: wrap;
    }

    .gh-header-title .js-issue-title {
      margin-right: 7px;
    }

    .gh-header-title .octotree-btn {
      margin-left: -22px;
      order: -1;
    }
  }

  /*
   * Use the same size as branch button for latest-tag-button and list-prs-for-file
   * https://github.com/sindresorhus/refined-github/pull/3356
   */
  .rgh-latest-tag-button,
  .rgh-latest-tag-button + .btn,
  :is(.rgh-latest-tag-button, #branch-select-menu) + .dropdown .btn {
    padding: 5px 16px;
    font-size: 14px;
  }

  /*
   * Unhide README header
   * https://github.com/sindresorhus/refined-github/issues/4157
   */
  .repository-content #readme:not(.blob) .Box-title {
    visibility: visible;
  }

  .repository-content #readme:not(.blob) .Box-header {
    margin-bottom: 0;
  }

  /*
   * Hide "Copy" button on files
   * https://github.com/sindresorhus/refined-github/issues/4802#issuecomment-924081058
   */
  .rgh-copy-file {
    display: none;
  }

  .rgh-copy-file:first-child + .btn {
      border-top-left-radius: 6px;
      border-bottom-left-radius: 6px;
  }
}
