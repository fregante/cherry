/* ==UserStyle==
@name         GitHub
@version      1.8.1
@description  Style optimizations for GitHub
@license      MIT
@author       kidonng
@homepageURL  https://github.com/kidonng/cherry
@namespace    kidonng
@preprocessor stylus

@var checkbox lightHeader "Light theme header" 0
@var checkbox hideExplore "Hide \"Explore repositories\" on dashboard" 1
@var checkbox hideHighlights "Hide \"Highlights\" on user profile" 1
@var checkbox hideProBadge "Hide \"PRO\" badge in user hovercard" 1
@var checkbox removeMDBorders "Remove Markdown file borders" 1
@var checkbox showCommitMessage "Always show commit message on repository homepage" 1
@var checkbox expandNavLink "Expand navigation link in repository file tree" 1
==/UserStyle== */
@-moz-document url-prefix("https://github.com/") {
  /* Hide "Branch" prefix of branch switcher on repository homepage */
  #branch-select-menu .d-lg-inline {
    display: none !important;
  }
  
  /* https://github.com/mallowigi/a-file-icon-web/pull/2#issuecomment-648701903 */
  .octicon-file,
  .octicon-file-directory {
    width: 16px;
    height: 16px;
  }

  if lightHeader {
    /* Match .bg-gray-light */
    .Header {
      background: #fafbfc;
    }

    /* Invert .Header-link */
    .Header-link {
      color: black;
    }

    /* Invert .Header-link:focus, .Header-link:hover */
    .Header-link:focus,
    .Header-link:hover {
      color: rgba(0, 0, 0, .7);
    }

    .header-search-wrapper {
      border: 1px solid black !important;
    }

    .header-search-input,
    .header-search-input::placeholder {
      color: black !important;
    }
  }

  if hideProBadge {
    .user-status-container + div .Label.Label--purple.text-uppercase.mt-2 {
      display: none !important;
    }
  }

  if hideHighlights {
    .user-profile-sticky-bar ~ .border-top.pt-3.mt-3.d-none.d-md-block {
      display: none !important;
    }
  }

  if hideExplore {
    .team-left-column:last-child {
      visibility: hidden;
    }
  }

  if removeMDBorders {
    #readme {
      border-top: 0;
      border-right: 0;
      border-left: 0;
    }
  }

  /* https://github.com/sindresorhus/refined-github/pull/3278#issuecomment-649488947 */
  if showCommitMessage {
    .Details[data-issue-and-pr-hovercards-enabled]:not(.Details--on) .Details-content--hidden {
      display: block !important;
      height: 1.5em;
      overflow: hidden;
    }
  }

  /* https://github.com/sindresorhus/refined-github/issues/3281#issuecomment-649480805 */
  if expandNavLink {
    [role="rowheader"] .js-navigation-open {
      display: inline-block;
      width: 100%;
    }
  }
}

@-moz-document regexp("https://github.com/.+/blob/.+\.md.*") {
  if removeMDBorders {
    .repository-content .Box.mt-3.position-relative {
      border-right: 0;
      border-left: 0;
      margin-right: 1px;
      margin-left: 1px;
    }
  }
}
